<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="logo.jfif" type="image/png">
<title>تأكيد الطلب</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

<style>
body{
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.card{
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0,0,0,.1);
}

/* زرار */
.btn-confirm{
    background: linear-gradient(90deg,#2e7d32,#43a047);
    color:#fff;
    font-weight:bold;
    border-radius:10px;
}
.btn-confirm:hover{
    background: linear-gradient(90deg,#1b5e20,#2e7d32);
}

/* شاشة النجاح */
.success-box{
    display:none;
    text-align:center;
    padding:30px;
}

.check-circle{
    width:90px;
    height:90px;
    border-radius:50%;
    background:#43a047;
    display:flex;
    align-items:center;
    justify-content:center;
    margin:0 auto 20px;
}

.check-circle svg{
    width:50px;
    color:white;
}

.success-title{
    font-size:28px;
    font-weight:bold;
    margin-bottom:10px;
}

.success-text{
    color:#555;
    margin-bottom:20px;
}

.btn-home{
    background:#2e7d32;
    color:#fff;
    font-weight:bold;
    border-radius:10px;
}
.btn-home:hover{background:#1b5e20}
</style>
</head>

<body>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-12 col-md-6 col-lg-5">

      <div class="card p-4">

        <!-- ===== FORM ===== -->
        <div id="orderForm">
          <h4 class="text-center mb-4 fw-bold text-success">بيانات الطلب</h4>

          <input id="name" class="form-control mb-3" placeholder="الاسم">
          <input id="phone" class="form-control mb-3" placeholder="رقم الواتساب">
          <textarea id="address" class="form-control mb-3" rows="3" placeholder="العنوان"></textarea>

          <button class="btn btn-confirm w-100" onclick="sendOrder()">تأكيد الطلب</button>
        </div>

        <!-- ===== SUCCESS ===== -->
        <div id="successBox" class="success-box">
          <div class="check-circle">
            <svg viewBox="0 0 24 24">
              <path fill="currentColor"
                d="M9 16.2l-3.5-3.5-1.4 1.4L9 19 20.3 7.7l-1.4-1.4z"/>
            </svg>
          </div>

          <div class="success-title">شكراً لاتمامك الطلب</div>
          <div class="success-text">
            لقد استلمنا طلبك وسنتواصل معك في أقرب وقت.<br>
            يرجى الانتظار لرسالتنا علي الواتساب
          </div>

          <a href="index.html" class="btn btn-home w-100 mb-2">العودة للرئيسية</a>
          <a href="#" class="text-success fw-bold text-decoration-none">عرض أحدث العروض</a>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
// ===== Firebase Config =====
const firebaseConfig = {
  apiKey: "AIzaSyA4dIcOZQ6u2oR5eMlft9x_RJ9_9lIppq8",
  authDomain: "bwaser-8aff1.firebaseapp.com",
  projectId: "bwaser-8aff1",
  storageBucket: "bwaser-8aff1.firebasestorage.app",
  messagingSenderId: "632939529719",
  appId: "1:632939529719:web:e971cc0706163118365af2"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ===== Send Order =====
function sendOrder(){

  const n = document.getElementById("name").value.trim();
  const p = document.getElementById("phone").value.trim();
  const a = document.getElementById("address").value.trim();

  if(n === "" || p === "" || a === ""){
    alert("اكمل البيانات");
    return;
  }

  db.collection("orders").add({
    name: n,
    phone: p,
    address: a,
    product: "المرهم الصيني",
    price: 250,
    status: "Pending",
    created: firebase.firestore.FieldValue.serverTimestamp()
  })
  .then(()=>{
    document.getElementById("orderForm").style.display = "none";
    document.getElementById("successBox").style.display = "block";

    confetti({
      particleCount: 120,
      spread: 70,
      origin: { y: 0.6 },
      colors: ["#2e7d32","#43a047","#66bb6a","#c8e6c9"]
    });
  })
  .catch(err=>{
    alert("حصل خطأ: " + err.message);
  });
}
</script>

</body>
</html>
